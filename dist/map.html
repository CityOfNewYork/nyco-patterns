<!DOCTYPE html>
<html class="text-size-0" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta content="IE=edge" http-equiv="X-UA-Compatible" />
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <!--GLOBAL STYLES-->
    <!--PRINT STYLE-->
    <!--PAGE SPECIFIC STYLES-->
    <!--EXTERNAL STYLES-->
    <link href="https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.1/mapbox-gl.css" rel="stylesheet" type="text/css" />
    <!--NYCO PATTERNS-->
    <link href="styles/nyco-patterns-default.css" rel="stylesheet" />
    <title>Map | NYCO Patterns</title>
    <link href="/images/favicon/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png" />
    <link href="/images/favicon/favicon.ico" rel="shortcut icon" />
    <script type="text/javascript">
      var VERSION = '1.7.0';
    </script>
    <noscript>
      <style>
        body {
          visibility: visible !important;
        }
      </style>
    </noscript>
    <script type="text/javascript">
      function load() {
        document.body.style.visibility = 'visible';
      }

      function toggleTheme(theme) {
        var stylesheets = document.styleSheets;

        for (var i = 0; i < stylesheets.length; i++) {
          var ss = stylesheets[i];
          ss.disabled = !ss.disabled && ss.href.indexOf(theme) > -1 ? true : false;
        }
      }
      toggleTheme('www1.nyc.gov');
    </script>
  </head>
</html>
<body class="bg-base-black" onload="load()" style="visibility: hidden;">
  <header class="o-header screen-tablet:layout--sidebar">
    <div class="o-header__banner-main color-primary-button">
      <button aria-controls="js-navigation" aria-pressed="false" class="o-header__main-toggle" data-js="toggle">Menu</button>
      <h1 class="o-header__main-title">
        <span class="hidden"></span>
        <svg aria-hidden="true" class="o-header__logo-main icon-logo-nyco"><use xlink:href="#icon-logo-nyco"></use></svg><svg aria-hidden="true" class="o-header__logo-secondary icon-logo-nyco"><use xlink:href="#icon-logo-nyco"></use></svg>
      </h1>
      <div aria-hidden="true" class="o-header__main-version">v1.7.0</div>
    </div>
    <div class="o-header__banner-secondary color-dark-background">
      <h1 class="o-header__secondary-title text-jumbo">Patterns</h1>
      <a href="#main-content">Skip to main content</a>
    </div>
    <div class="o-header__secondary-version color-dark-background">
      <div>
        <a class="btn flex items-center" href="https://github.com/CityOfNewYork/nyco-patterns/tree/v1.7.0">
          <svg aria-hidden="true" class="icon-github-mark icon-small mr-1"><use xlink:href="#icon-github-mark"></use></svg>
          1.7.0
        </a>
      </div>
    </div>
  </header>
  <main class="screen-tablet:layout--sidebar screen-tablet:flex items-stretch m-0 p-0 screen-tablet:min-h-screen" id="main-content">
    <aside class="o-navigation bg-primary-navy">
      <div class="o-navigation__wrap color-mid-background hidden screen-tablet:flex">
        <div class="o-navigation__nav">
          <div class="o-navigation__stick" style="height: 1015px">
            <nav><a class="o-navigation__link" href="index">Overview</a></nav>
            <nav>
              <span class="o-navigation__link-header text-primary-blue-70t border-primary-blue-30t">Elements</span>
              <a class="o-navigation__link" href="buttons">Buttons</a>
              <a class="o-navigation__link" href="checkboxes">Checkboxes</a>
              <a class="o-navigation__link" href="icons">Icons</a>
              <a class="o-navigation__link" href="inputs">Inputs</a>
              <a class="o-navigation__link" href="layouts">Layouts</a>
              <a class="o-navigation__link" href="tables">Tables</a>
              <a class="o-navigation__link" href="select">Select</a>
              <span class="o-navigation__link-header text-primary-blue-70t border-primary-blue-30t">Objects</span>
              <a class="o-navigation__link" href="charts">Charts</a>
              <a class="o-navigation__link" href="footer">Footer</a>
              <a class="o-navigation__link" href="feed">Feed</a>
              <a class="o-navigation__link" href="header">Header</a>
              <a class="o-navigation__link" href="navigation">Navigation</a>
              <span class="o-navigation__link-header text-primary-blue-70t border-primary-blue-30t">Utilities</span>
              <a class="o-navigation__link" href="accessibility">Accessibility</a>
              <a class="o-navigation__link" href="animate">Animate</a>
              <a class="o-navigation__link" href="colors">Colors</a>
              <a class="o-navigation__link" href="type">Type</a>
            </nav>
          </div>
        </div>
      </div>
      <div class="o-navigation__wrap color-mid-background hidden hidden:overflowFadeInUp animated screen-tablet:hidden" id="js-navigation">
        <div class="o-navigation__banner color-dark-background"><h1 class="o-navigation__banner-title">Patterns</h1></div>
        <div class="o-navigation__nav animated">
          <div class="text-center"><a class="btn mt-2 mb-2 px-5" data-theme="www1.nyc.gov" onclick="toggleTheme(event.target.dataset.theme)">nyc.gov styles</a></div>
          <nav><a class="o-navigation__link" href="index">Overview</a></nav>
          <nav>
            <span class="o-navigation__link-header text-primary-blue-70t border-primary-blue-30t">Elements</span>
            <a class="o-navigation__link" href="buttons">Buttons</a>
            <a class="o-navigation__link" href="checkboxes">Checkboxes</a>
            <a class="o-navigation__link" href="icons">Icons</a>
            <a class="o-navigation__link" href="inputs">Inputs</a>
            <a class="o-navigation__link" href="layouts">Layouts</a>
            <a class="o-navigation__link" href="tables">Tables</a>
            <a class="o-navigation__link" href="select">Select</a>
            <span class="o-navigation__link-header text-primary-blue-70t border-primary-blue-30t">Objects</span>
            <a class="o-navigation__link" href="charts">Charts</a>
            <a class="o-navigation__link" href="footer">Footer</a>
            <a class="o-navigation__link" href="feed">Feed</a>
            <a class="o-navigation__link" href="header">Header</a>
            <a class="o-navigation__link" href="navigation">Navigation</a>
            <span class="o-navigation__link-header text-primary-blue-70t border-primary-blue-30t">Utilities</span>
            <a class="o-navigation__link" href="accessibility">Accessibility</a>
            <a class="o-navigation__link" href="animate">Animate</a>
            <a class="o-navigation__link" href="colors">Colors</a>
            <a class="o-navigation__link" href="type">Type</a>
          </nav>
        </div>
      </div>
    </aside>
    <article class="color-light-background py-2 px-4 screen-desktop:px-6">
      <h1 class="m-0 p-0 mt-2">Map</h1>
      <p></p>
      <p>
        All map source files can be found within
        <code>src/objects/map/</code>
        .
      </p>
      <section class="flex flex-col screen-desktop:flex-row flex-wrap pb-4">
        <div class="mt-4 max-w-full screen-desktop:w-1/2 screen-desktop:border-r border-secondary-white">
          <div class="o-content screen-desktop:pr-4 screen-desktop:pr-6">
            <h2 class="mt-0" id="multi-layer-with-toggle-links"><a href="#multi-layer-with-toggle-links">Multi-layer with toggle links</a></h2>
            <p>The &lt;code&gt;multi&lt;/code&gt; map type accepts one or more GeoJSON layers. When a single layer is set for this object, the menu (&lt;code&gt;nyco-map-menu&lt;/code&gt;) is omitted.</p>

<p>In this example, zipcodes, neighborhoods, and boroughs are each individual GeoJSON Feature Collection objects. Click events on the polygon shapes in the map will display information based on the &lt;code&gt;filterBy&lt;/code&gt; attribute set for the layer.</p>

<p>To utilize this map, set &lt;code&gt;mapType: &#39;multi&#39;&lt;/code&gt; in your &lt;code&gt;config&lt;/code&gt; object.</p>

          </div>
        </div>
        <div class="mt-4 w-full max-w-full screen-desktop:max-w-1/2">
          <div class="screen-desktop:pl-4 screen-desktop:pl-6">
            <div class="overflow-x-auto pb-3">
              <div class="o-map" data-js="nyco-map-ml">
                <nyco-map-ml :config="config" :layers="layers" id="nyco-map-ml" style="height: 400px; width: 500px"></nyco-map-ml>
                <div class="map-menu pt-2" id="nyco-map-menu"></div>
              </div>
            </div>
          </div>
        </div>
      </section>
      <section class="flex flex-col screen-desktop:flex-row flex-wrap pb-4">
        <div class="mt-4 max-w-full screen-desktop:w-1/2 screen-desktop:border-r border-secondary-white">
          <div class="o-content screen-desktop:pr-4 screen-desktop:pr-6">
            <h2 class="mt-0" id="single-layer-with-legend"><a href="#single-layer-with-legend">Single-layer with legend</a></h2>
            <p>The &lt;code&gt;single&lt;/code&gt; map type accepts a single GeoJSON layer and displays a legend based on the defined feature property (&lt;code&gt;legendColumn&lt;/code&gt; attribute).</p>

<p>In this example, the layer can be filtered by selecting a borough from the legend or by clicking a polygon shape on the map. The information displayed in the popup is based on the &lt;code&gt;filterBy&lt;/code&gt; attribute set for the layer.</p>

<p>To utilize this map, set &lt;code&gt;mapType: &#39;single&#39;&lt;/code&gt; in the &lt;code&gt;config&lt;/code&gt; object.</p>

          </div>
        </div>
        <div class="mt-4 w-full max-w-full screen-desktop:max-w-1/2">
          <div class="screen-desktop:pl-4 screen-desktop:pl-6">
            <div class="overflow-x-auto pb-3">
              <div class="o-map relative" data-js="nyco-map-sl">
                <nyco-map-sl :config="config" :layers="layers" id="nyco-map-sl" style="height: 400px; width: 500px"></nyco-map-sl>
                <nav class="map-legend" id="nyco-map-legend"></nav>
              </div>
            </div>
          </div>
        </div>
      </section>
      <section class="pb-4">
        <div class="layout--content">
          <h2 class="mt-0" id="usage"><a href="#usage">Usage</a></h2>
          <div><div class="my-0"><h3>Setup</h3>

<p>
  The map is a Vue component powered by
  <a href="https://www.mapbox.com/">Mapbox</a>
  and requires a Mapbox
  <code>access token</code>
  to initialize in a project. Follow the Mapbox documentation at this
  <a href="https://docs.mapbox.com/help/how-mapbox-works/access-tokens/#creating-and-managing-access-tokens">link</a>
  to create an
  <code>access token</code>
  .
</p>

<p>
  Note: If a
  <code>403 (Forbidden)</code>
  error from Mapbox is encountered, make sure the project is using a valid Mapbox
  <code>access token</code>
  .
</p>

<p>
  Both map types expect the layer source to be GeoJSON. All GeoJSON source layers used to render a map object should be valid Feature Collection&#39;s and contain only one geometry field per feature.
  <a href="https://geojson.org/">Learn more about GeoJSON</a>
  .
</p>

<p>Note: If the map loads but the layer doesn&#39;t display, make sure the GeoJSON is valid and the layer object is properly configured.</p>

<h3>Installation</h3>

<p>
  Install the
  <code>nyco-patterns</code>
  npm package by running
  <code>npm install nyco-patterns</code>
  in the project root directory.
</p>

<p>Example of Component Usage in a Vue App:</p>

<pre><code>// demo.vue

&lt;template&gt;
  &lt;div class=&#39;o-map&#39;&gt;
    &lt;nyco-map id=&#39;nyco-map-ml&#39; :layers=&#39;layers&#39; :config=&#39;config&#39; style=&#39;height: 400px; width: 500px&#39;&gt;&lt;/nyco-map&gt;
    &lt;div id=&#39;map-menu&#39; class=&#39;map-menu&#39;&gt;&lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
  import NycoMap from &#39;../node_modules/nyco-patterns/src/objects/map/map.vue&#39;;

  export default {
    name: &#39;Map&#39;,
    data() {
      config: {
        APIKey: &#39;pk.eydcdxckbhbjhbjhbhj&#39;,
        containerId: &#39;nyco-map-ml&#39;,
        legendId: &#39;map-menu&#39;,
        center: [-73.986710, 40.693391],
        zoom: 9,
        style: &#39;mapbox://styles/nyco-products/cjv6wjq8812ys1gp39mnvuk2w&#39;,
        mapType: &#39;multi&#39;,
        colors: [
          [&#39;#000000&#39;, &#39;#F2695D&#39;],
          [&#39;#000000&#39;, &#39;#FFA133&#39;],
          [&#39;#2F334F&#39;, &#39;#ACAEB9&#39;]
        ]
      },
      layers: [
        { name: &#39;zipcodes&#39;,
          data: GeoJSONData,
          default: true,
          filterBy: &#39;GEOID10&#39;,
          fill: [&#39;#000000&#39;, &#39;#F2695D&#39;]
        },
        {
          name: &#39;boroughs&#39;,
          data: GeoJSONData,
          default: false,
          filterBy: &#39;boro_name&#39;
        },
      ]
    },
    components: {
      NycoMap
    },
  }
&lt;/script&gt;</code></pre>

<h3>Dependencies</h3>

<p>
  This component depends on
  <a href="https://docs.mapbox.com/mapbox-gl-js/api/">Mapbox GL JS</a>
  .
</p>

<h3>Map Configuration</h3>

<p>
  The
  <code>config</code>
  attributes
  <code>APIKey</code>
  ,
  <code>containerId</code>
  ,
  <code>center</code>
  ,
  <code>zoom</code>
  , and
  <code>style</code>
  are all Mapbox attributes. You can read more about these in their
  <a href="https://docs.mapbox.com/mapbox-gl-js/api/">API Reference docs</a>
  .
</p>

<table>
  <thead>
    <tr>
      <th>Option</th>
      <th align="center">Type</th>
      <th align="center">Importance</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>APIKey</code></td>
      <td align="center"><em>string</em></td>
      <td align="center">required</td>
      <td>
        The Mapbox Access Token (
        <a href="https://docs.mapbox.com/help/how-mapbox-works/access-tokens/">setup</a>
        ).
      </td>
    </tr>
    <tr>
      <td><code>containerId</code></td>
      <td align="center"><em>string</em></td>
      <td align="center">required</td>
      <td>
        The
        <code>id</code>
        of the container where the map is to be created.
      </td>
    </tr>
    <tr>
      <td><code>legendId</code></td>
      <td align="center"><em>string</em></td>
      <td align="center">required</td>
      <td>
        The
        <code>id</code>
        of the container where the legend/toggle menu is to be created.
      </td>
    </tr>
    <tr>
      <td><code>center</code></td>
      <td align="center"><em>array</em></td>
      <td align="center">optional</td>
      <td>The initial geographical centerpoint of the map. Default is [0, 0]</td>
    </tr>
    <tr>
      <td><code>zoom</code></td>
      <td align="center"><em>number</em></td>
      <td align="center">optional</td>
      <td>The initial zoom level of the map. Default is 0.</td>
    </tr>
    <tr>
      <td><code>style</code></td>
      <td align="center"><em>object/string</em></td>
      <td align="center">required</td>
      <td>
        The map&#39;s Mapbox style. This must be an a JSON object conforming to the schema described in the
        <a href="https://docs.mapbox.com/mapbox-gl-js/style-spec/">Mapbox Style Specification</a>
        , or a URL to such JSON.
      </td>
    </tr>
    <tr>
      <td><code>disableScroll</code></td>
      <td align="center"><em>boolean</em></td>
      <td align="center">optional</td>
      <td>
        Set to
        <code>true</code>
        to disable map zoom when using scroll.
      </td>
    </tr>
    <tr>
      <td><code>mapType</code></td>
      <td align="center"><em>string</em></td>
      <td align="center">required</td>
      <td>
        The type of map to be rendered. It can be
        <code>single</code>
        or
        <code>multi</code>
        .
      </td>
    </tr>
    <tr>
      <td><code>colors</code></td>
      <td align="center"><em>array</em></td>
      <td align="center">optional*</td>
      <td>
        The
        <code>fill-outline</code>
        and
        <code>fill</code>
        color applied to a layer. The
        <code>colors</code>
        array is a list of hex value (
        <em>string</em>
        ) color combinations:
        <code>[&#39;#000000&#39;, &#39;#F2695D&#39;]</code>
        . The first value is applied as the
        <code>fill-outline</code>
        and the second as the
        <code>fill</code>
        . A color combination is applied to a layer at random, so multiple layers may share the same color combination. This attribute overrides the
        <code>layer.fill</code>
        attribute.
      </td>
    </tr>
  </tbody>
</table>

<h3>Layer Configuration</h3>

<p>
  The
  <code>layers</code>
  array requires at least one layer object to render. The object options are below:
</p>

<table>
  <thead>
    <tr>
      <th>Option</th>
      <th align="center">Type</th>
      <th align="center">Importance</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>name</code></td>
      <td align="center"><em>string</em></td>
      <td align="center">required</td>
      <td>
        The layer name, also set as the Mapbox layer
        <code>id</code>
        and
        <code>source</code>
        . For the
        <code>multi</code>
        map, this value is used to generate the map menu (toggle links).
      </td>
    </tr>
    <tr>
      <td><code>data</code></td>
      <td align="center"><em>object</em></td>
      <td align="center">required</td>
      <td>The GeoJSON layer/source data.</td>
    </tr>
    <tr>
      <td><code>filterBy</code></td>
      <td align="center"><em>string</em></td>
      <td align="center">required</td>
      <td>The column (feature property) to be filtered when interacting with a polygon shape on the map. This is the value that is displayed in the popup and determines the map shape selection (highlight) on click.</td>
    </tr>
    <tr>
      <td><code>fill</code></td>
      <td align="center"><em>array</em></td>
      <td align="center">required*</td>
      <td>
        The
        <code>fill-outline</code>
        and
        <code>fill</code>
        color applied to the layer. The array must contain two hex values (
        <em>string</em>
        ):
        <code>[&#39;#000000&#39;, &#39;#F2695D&#39;]</code>
        . The first value is applied as the
        <code>fill-outline</code>
        and the second as the
        <code>fill</code>
        . This attribute is overwritten by the
        <code>config.colors</code>
        attribute.
      </td>
    </tr>
    <tr>
      <td><code>default</code></td>
      <td align="center"><em>string</em></td>
      <td align="center">required</td>
      <td>
        This ensures a specific layer is displayed on map load for a
        <code>multi</code>
        map type, with multiple layers. Set to
        <code>true</code>
        to display layer on map load, set to
        <code>false</code>
        or omit otherwise.
      </td>
    </tr>
    <tr>
      <td><code>legendColumn</code></td>
      <td align="center"><em>string</em></td>
      <td align="center">required</td>
      <td>
        The column (feature property) to be filtered when interacting with the legend/menu for a
        <code>single</code>
        map type. The unique values of this feature property make up the legend items. All features with matching properties will be highlighted when selected through the legend.
      </td>
    </tr>
  </tbody>
</table>
</div></div>
        </div>
      </section>
    </article>
  </main>
  <footer class="o-footer color-dark-background screen-tablet:layout--four-columns-gutter">
    <nav>
      <a class="o-footer__nav-link" href="index">Overview</a>
      <a class="o-footer__nav-link" href="https://github.com/CityOfNewYork/nyco-patterns/tree/v1.7.0">GitHub Repository</a>
      <a class="o-footer__nav-link" href="http://www.nyc.gov/opportunity" title="NYC Opportunity&lt;products@nycopportunity.nyc.gov&gt;">NYC Opportunity</a>
      <a class="o-footer__nav-link" href="https://tailwindcss.com">Tailwind CSS</a>
      <a class="o-footer__nav-link" href="https://blueprint.cityofnewyork.us">NYC Digital Blueprint</a>
    </nav>
    <div></div>
    <div class="o-footer__info">
      <a href="http://nyc.gov/opportunity" title="NYC Opportunity&lt;products@nycopportunity.nyc.gov&gt;">
        <svg aria-hidden="true" class="icon-logo-secondary o-footer__logo text-base-white" style="height: 52px !important"><use xlink:href="#icon-logo-secondary"></use></svg>
      </a>
      <p>
        NYC Opportunity is the
        <a href="http://nyc.gov/opportunity">New York City Mayor's Office for Economic Opportunity</a>
        . We are committed to sharing open source software that we use in our products. Feel free to ask questions and share feedback. Follow @nycopportunity on&nbsp;
        <a href="https://twitter.com/nycopportunity" target="_blank" rel="nofollow noopener">Twitter</a>
        ,&nbsp;
        <a href="https://www.facebook.com/NYCOpportunity/" target="_blank" rel="nofollow noopener">Facebook</a>
        ,&nbsp;
        <a href="https://medium.com/@nycopportunity" target="_blank" rel="nofollow noopener">Medium</a>
        , and&nbsp;
        <a href="https://github.com/orgs/CityOfNewYork/teams/nycopportunity" target="_blank" rel="nofollow noopener" title="Viewable by github.com/orgs/CityOfNewYork/ members.">Github</a>
        .
      </p>
      <small>
        © City of New York, 2019 All Rights Reserved.
        <br />
        NYC is a trademark and service mark of the City of New York.
      </small>
    </div>
  </footer>
  <script crossorigin="anonymous" src="https://polyfill.io/v3/polyfill.min.js?flags=gated&amp;features=Array.prototype.forEach,Element.prototype.matches,Element.prototype.remove,fetch"></script>
  <script src="scripts/NycoPatterns.js"></script>
  <script type="text/javascript">
    var nyco = new NycoPatterns();
    nyco.icons();
    nyco.toggle();
  </script>
  <script src="https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.1/mapbox-gl.js"></script>
  <script type="text/javascript">
    nyco.map('multi');
    nyco.map('single');
  </script>
</body>
